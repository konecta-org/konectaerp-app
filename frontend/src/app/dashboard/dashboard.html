<div class="dashboard-container">
  <div class="dashboard-header">
    <div>
      <h1 class="dashboard-title">Dashboard</h1>
      <p class="dashboard-subtitle">Welcome back! Here's what's happening today.</p>
    </div>
    <button class="btn-refresh" (click)="refresh()" [disabled]="loading()">
      <span class="refresh-icon">‚Üª</span>
      Refresh
    </button>
  </div>

  @if (loading()) {
    <app-loading-spinner [size]="'large'" [message]="'Loading dashboard...'"></app-loading-spinner>
  } @else if (summary()) {
    <!-- User Management Summary -->
    <section class="dashboard-section">
      <h2 class="section-title">User Management</h2>
      <div class="stats-grid">
        <app-stat-card
          [label]="'Total Users'"
          [value]="summary()!.userSummary.totalUsers"
          [icon]="'üë•'"
          [color]="'blue'"
          [clickable]="true"
          routerLink="/users">
        </app-stat-card>
        
        <app-stat-card
          [label]="'Active Users'"
          [value]="summary()!.userSummary.activeUsers"
          [icon]="'‚úì'"
          [color]="'green'">
        </app-stat-card>
        
        <app-stat-card
          [label]="'New This Month'"
          [value]="summary()!.userSummary.newUsersThisMonth"
          [icon]="'üìà'"
          [color]="'purple'"
          [trend]="'up'"
          [trendValue]="'+' + summary()!.userSummary.newUsersThisMonth">
        </app-stat-card>
        
        <app-stat-card
          [label]="'Inactive Users'"
          [value]="summary()!.userSummary.inactiveUsers"
          [icon]="'‚è∏'"
          [color]="'yellow'">
        </app-stat-card>
      </div>
    </section>

    <!-- HR Summary -->
    <section class="dashboard-section">
      <h2 class="section-title">Human Resources</h2>
      <div class="stats-grid">
        <app-stat-card
          [label]="'Total Employees'"
          [value]="summary()!.hrSummary.totalEmployees"
          [icon]="'üë®‚Äçüíº'"
          [color]="'blue'"
          [clickable]="true"
          routerLink="/hr/employees">
        </app-stat-card>
        
        <app-stat-card
          [label]="'Active Employees'"
          [value]="summary()!.hrSummary.activeEmployees"
          [icon]="'‚úì'"
          [color]="'green'">
        </app-stat-card>
        
        <app-stat-card
          [label]="'Departments'"
          [value]="summary()!.hrSummary.departmentCount"
          [icon]="'üè¢'"
          [color]="'purple'"
          [clickable]="true"
          routerLink="/hr/departments">
        </app-stat-card>
        
        <app-stat-card
          [label]="'Pending Leave Requests'"
          [value]="summary()!.hrSummary.pendingLeaveRequests"
          [icon]="'üìã'"
          [color]="summary()!.hrSummary.pendingLeaveRequests > 0 ? 'yellow' : 'green'"
          [clickable]="true"
          routerLink="/hr/leave-requests">
        </app-stat-card>
      </div>
    </section>

    <!-- Finance Summary -->
    <section class="dashboard-section">
      <h2 class="section-title">Finance</h2>
      <div class="stats-grid">
        <app-stat-card
          [label]="'Total Revenue'"
          [value]="'$' + summary()!.financeSummary.totalRevenue.toLocaleString()"
          [icon]="'üí∞'"
          [color]="'green'"
          [trend]="'up'">
        </app-stat-card>
        
        <app-stat-card
          [label]="'Total Expenses'"
          [value]="'$' + summary()!.financeSummary.totalExpenses.toLocaleString()"
          [icon]="'üí∏'"
          [color]="'red'"
          [clickable]="true"
          routerLink="/finance/expenses">
        </app-stat-card>
        
        <app-stat-card
          [label]="'Pending Invoices'"
          [value]="summary()!.financeSummary.pendingInvoices"
          [icon]="'üìÑ'"
          [color]="'yellow'"
          [clickable]="true"
          routerLink="/finance/invoices">
        </app-stat-card>
        
        <app-stat-card
          [label]="'Budget Utilization'"
          [value]="summary()!.financeSummary.budgetUtilization + '%'"
          [icon]="'üìä'"
          [color]="summary()!.financeSummary.budgetUtilization > 80 ? 'red' : 'blue'">
        </app-stat-card>
      </div>
    </section>

    <!-- Inventory Summary -->
    <section class="dashboard-section">
      <h2 class="section-title">Inventory</h2>
      <div class="stats-grid">
        <app-stat-card
          [label]="'Total Items'"
          [value]="summary()!.inventorySummary.totalItems"
          [icon]="'üì¶'"
          [color]="'blue'"
          [clickable]="true"
          routerLink="/inventory/items">
        </app-stat-card>
        
        <app-stat-card
          [label]="'Low Stock Items'"
          [value]="summary()!.inventorySummary.lowStockItems"
          [icon]="'‚ö†Ô∏è'"
          [color]="summary()!.inventorySummary.lowStockItems > 0 ? 'red' : 'green'"
          [clickable]="true"
          routerLink="/inventory/items">
        </app-stat-card>
        
        <app-stat-card
          [label]="'Total Value'"
          [value]="'$' + summary()!.inventorySummary.totalValue.toLocaleString()"
          [icon]="'üíé'"
          [color]="'purple'">
        </app-stat-card>
        
        <app-stat-card
          [label]="'Recent Transactions'"
          [value]="summary()!.inventorySummary.recentTransactions"
          [icon]="'üîÑ'"
          [color]="'blue'"
          [clickable]="true"
          routerLink="/inventory/transactions">
        </app-stat-card>
      </div>
    </section>

    <!-- Quick Actions -->
    <section class="dashboard-section">
      <h2 class="section-title">Quick Actions</h2>
      <div class="quick-actions">
        <a routerLink="/users/create" class="quick-action-card">
          <span class="action-icon">‚ûï</span>
          <span class="action-label">Add User</span>
        </a>
        
        <a routerLink="/hr/employees/create" class="quick-action-card">
          <span class="action-icon">üë§</span>
          <span class="action-label">Add Employee</span>
        </a>
        
        <a routerLink="/finance/expenses" class="quick-action-card">
          <span class="action-icon">üíµ</span>
          <span class="action-label">Record Expense</span>
        </a>
        
        <a routerLink="/inventory/items/create" class="quick-action-card">
          <span class="action-icon">üì¶</span>
          <span class="action-label">Add Inventory Item</span>
        </a>
        
        <a routerLink="/reporting/overview" class="quick-action-card">
          <span class="action-icon">üìä</span>
          <span class="action-label">View Reports</span>
        </a>
        
        <a routerLink="/profile" class="quick-action-card">
          <span class="action-icon">‚öôÔ∏è</span>
          <span class="action-label">Settings</span>
        </a>
      </div>
    </section>
  }
</div>
